-----------------------funcion para iniciar sesion retornando el id del usuario----------

CREATE OR REPLACE FUNCTION fo_m01_iniciarsesion(usuario character varying, password character varying)
  RETURNS TABLE(id int)
   AS $$
DECLARE
   var_r    record;
BEGIN
   FOR var_r IN(SELECT usu_id
        FROM usuario
        WHERE usu_usuario = usuario and usu_password=password)
   LOOP
    id= var_r.usu_id;
    RETURN NEXT;
   END LOOP;
END; $$
  LANGUAGE plpgsql;

--------------------------obtener usuario-----------


  CREATE OR REPLACE FUNCTION fo_m01_getusuario(id2 int)
  RETURNS TABLE(id int, usuario character varying, password character varying, nombre character varying, apellido character varying,
 fechanac date, sexo char,correo character varying, estatura int, telefono character varying )
   AS $$
DECLARE
   var_r    record;
BEGIN
   FOR var_r IN(SELECT usu_id, usu_nombre, usu_apellido, usu_fecha_nac, usu_sexo, usu_correo, usu_usuario, usu_password,
                usu_telefono,usu_estatura
        FROM usuario
        WHERE usu_id = id2)
   LOOP
    id= var_r.usu_id;
    nombre = var_r.usu_nombre;
    apellido = var_r.usu_apellido;
    fechanac = var_r.usu_fecha_nac;
    sexo = var_r.usu_sexo;
    correo = var_r.usu_correo;
    usuario = var_r.usu_usuario;
    password = var_r.usu_password;
    estatura = var_r.usu_estatura;
    telefono = var_r.usu_telefono;
    RETURN NEXT;
   END LOOP;
END; $$
  LANGUAGE plpgsql;
