
--------------Función que devuelve los datos del usuario consultada.

CREATE OR REPLACE FUNCTION fo_m01_get_usuario(idUsuario int)
  RETURNS TABLE(nombreUsuario character varying, password character varying, nombre character varying,
		apellido character varying, sexo char, fecha_nac date, telefono character varying,
                estatura int, correo character varying, entrenador boolean, codigo int)
   AS $$
DECLARE
   var_r    record;
BEGIN
   FOR var_r IN(SELECT usu_id, usu_usuario, usu_password, usu_nombre, usu_apellido, usu_sexo,
		usu_fecha_nac, usu_telefono, usu_estatura, usu_correo, usu_entrenador, usu_codigo
        FROM usuario
        WHERE usu_id= idUsuario)
   LOOP
    idUsuario = var_r.usu_id;
    nombreUsuario = var_r.usu_usuario;
    password= var_r.usu_password;
    nombre = var_r.usu_nombre;
    apellido = var_r.usu_apellido;
    sexo = var_r.usu_sexo;
    fecha_nac = var_r.usu_fecha_nac;
    telefono = var_r.usu_telefono;
    estatura = var_r.usu_estatura;
    correo = var_r.usu_correo;
    entrenador= var_r.usu_entrenador;
    codigo= var_r.usu_codigo;
    RETURN NEXT;
   END LOOP;
END; $$
  LANGUAGE plpgsql;


----------------------------Función que elimina la cuenta de un usuario.

CREATE OR REPLACE FUNCTION fo_m01_elimina_usuario(idUsuario int)
RETURNS VOID AS $$
DECLARE 
BEGIN 
	DELETE FROM USUARIO WHERE USU_ID = idUsuario;
END $$
  LANGUAGE plpgsql;

---------------------------Función que modifica datos de una clase.

CREATE OR REPLACE FUNCTION fo_m01_modifica_usuario(nombreUsuario character varying, 
		password character varying, nombre character varying,
		apellido character varying, sexo char, fecha_nac date, 
		telefono character varying, estatura int, correo character varying, 
		entrenador boolean, codigo int)
  RETURNS void
   AS $$
DECLARE
BEGIN
    UPDATE USUARIO SET usu_usuario = nombreUsuario, usu_password = password, 
		usu_nombre = nombre, usu_apellido = apellido, usu_sexo = sexo,
		usu_fecha_nac = fecha_nac, usu_telefono = telefono, usu_estatura = estatura,
		usu_correo = correo, usu_entrenador = entrenador, usu_codigo = codigo
    WHERE USU_USUARIO = nombreUsuario;
END; $$
  LANGUAGE plpgsql;

